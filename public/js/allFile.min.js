var app=angular.module("overair",["ui.router","ngCookies","ngStorage"]);app.config(["$stateProvider","$urlRouterProvider",function(o,n){n.otherwise("/"),o.state("home",{url:"/dashboard",templateUrl:"admindashboard.html"}).state("/",{url:"/",controller:"indexController"})}]),app.run(["$rootScope","$location","$state","$window","$cookies",function(o,n,e){o.$on("$stateChangeStart",function(o,n){console.log("to state value is:::",n),null!=n&&"indexController"==n.controller&&(o.preventDefault(),e.go("home"))})}]);var config=config||{};config.development={app:"overAir-Dev",overAir:{url:"http://localhost:5000"}},config.staging={app:"overAir-Dev",overAir:{url:"http://overair.herokuapp.com"}},angular.module("overair").factory("adminApi",["$http","config",function(o,n){var e=n.overAir.url;return{getAllUserData:function(){return o.get(e+"/usersData")},saveBocnId:function(n){return o.post(e+"/bconId",n)}}}]),angular.module("overair").factory("config",function(){var o=function(){var o=window.document.URL;return 0===o.indexOf("http://127.0.0.1")||0===o.indexOf("http://localhost")?"development":0===o.indexOf("http://overair.herokuapp.com")?"staging":void 0}();if(!o)throw new Error("failed to detect application env");return window.config[o]}),angular.module("overair").factory("socket",["$rootScope","config",function(o,n){var e=n.overAir.url,r=io.connect(e);return{on:function(n,e){function a(){var n=arguments;o.$apply(function(){e.apply(r,n)})}return r.on(n,a),function(){r.removeListener(n,a)}},emit:function(n,e,a){r.emit(n,e,function(){var n=arguments;o.$apply(function(){a&&a.apply(r,n)})})}}}]);var app=angular.module("overair");app.controller("adminController",["$scope","$http","$state","$rootScope","$sessionStorage","config","adminApi","socket",function(o,n,e,r,a,t,l,i){function c(){l.getAllUserData().then(function(n){console.log("response is:::",n),o.dashBrdData=n},function(o){console.log("error to get data",o)})}console.log("hey controller");var g=t.overAir.url,s=0;o.margin=0,o.onloadFlg=!0,a.hasOwnProperty("sessionBcon")?(o.hideBtn=!0,o.saveBconId=a.sessionBcon.save_bconId,i.emit("channel2",o.saveBconId)):o.hideBtn=!1,i.on("connectedUserData",function(n){function e(){o.grp1Total===o.grp2Total&&(console.log("both group equal"),o.margin=0,o.imgStyle={"margin-left":o.margin+"px"}),o.onloadFlg===!0&&(o.grp1Total>o.grp2Total&&(o.diff=o.grp1Total-o.grp2Total,console.log("if group 1 before and diff",o.margin,o.diff),o.margin>=-1235&&(o.margin-=40*o.diff,console.log("group 1 after",o.margin),console.log("-1235 true"),o.imgStyle={"margin-left":o.margin+"px"})),o.grp1Total<o.grp2Total&&(o.diff=o.grp2Total-o.grp1Total,console.log("if group 2 before and diff",o.margin,o.diff),o.margin<=1166&&(o.margin+=40*o.diff,console.log("group 2 after",o.margin),console.log("-1166 true"),o.imgStyle={"margin-left":o.margin+"px"}))),o.onloadFlg=!1}if(console.log("hello",n),o.checkAssignBcon=n.slice(-1).pop(),!o.checkAssignBcon.bcon_id||o.checkAssignBcon.click_cnt||o.checkAssignBcon.cookie_val||(console.log("found bcon"),n.pop()),o.filterBcon=a.sessionBcon.save_bconId,o.filterGrp1Data=[],o.filterGrp2Data=[],o.grp1Total=0,o.grp2Total=0,o.frstGrpFlg=!1,o.scndGrpFlg=!1,o.assignGroupFlg=!0,o.filterBcon){for(var r in n)n[r].bcon_id===o.filterBcon&&(o.assignGroupFlg?(o.filterGrp1Data.push(n[r]),o.grp1Total+=n[r].click_cnt,o.assignGroupFlg=!1):(o.filterGrp2Data.push(n[r]),o.grp2Total+=n[r].click_cnt,o.assignGroupFlg=!0));o.$watch("grp1Total",function(n,e){console.log("grp1 changeOldVal & oldValue",s,e),s!==e&&(console.log("11oldValue and newValue",e,n),n!==e&&(s=e,console.log("grp1 after assign changeOldVal and oldValue",s,e),console.log("group 1 before",o.margin),o.margin>=-1235&&(o.margin-=40,console.log("group 1 after",o.margin),console.log("-1235 true"),o.imgStyle={"margin-left":o.margin+"px"}))),o.frstGrpFlg=!0}),o.$watch("grp2Total",function(n,r){console.log("grp2 changeOldVal & oldValue",s,r),s!==r&&(console.log("inside"),console.log("222oldValue and newValue",r,n),o.scndGrpFlg=!0,n!==r&&(s=r,console.log("grp2 after assign changeOldVal and oldValue",s,r),console.log("group 2 before",o.margin),o.margin<=1166&&(o.margin+=40,console.log("group 2 after",o.margin),console.log("-1166 true"),o.imgStyle={"margin-left":o.margin+"px"}))),o.frstGrpFlg===!0&&o.scndGrpFlg===!0&&e()})}}),c(),o.SaveBconData=function(){for(var e="acdefhiklmnoqrstuvwxyz0123456789".split(""),r="",t=0;4>t;t++){var l=Math.floor(Math.random()*e.length);r+=e[l]}console.log("Bcon id is::",r,g),o.bconData={bconId:r},n.post(g+"/bconId",o.bconData).then(function(n){console.log("response is::",n),o.saveBconId=n.data,a.sessionBcon={save_bconId:o.saveBconId},o.getSession=a.sessionBcon,console.log("getSession is::",o.getSession),o.hideBtn=!0},function(){console.log("error to save bcon id")})}}]),angular.module("overair").controller("indexController",["$scope","$http","$state","$cookies","$window","config",function(o,n,e,r,a,t){console.log("checking config vsalue is::",t)}]),angular.module("overair").controller("MainController",["$scope","$state","$rootScope",function(o,n,e){o.$state=n,console.log("main controller state is::",o.$state),e.$on("$stateChangeStart",function(o,n){console.log("to state value is:::",n)})}]);